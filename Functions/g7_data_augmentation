def data_augmentation(train_path, rotation_range = 40, width_shift_range = .2, height_shift_range = .2, shear_range = .2, zoom_range = .2, horizontal_flip = True, nb_img = 10):
    classes = os.listdir(train_path)
    
    datagen = ImageDataGenerator(
           rotation_range=rotation_range,
           width_shift_range=width_shift_range,
           height_shift_range=height_shift_range,
           shear_range=shear_range,
           zoom_range=zoom_range,
           horizontal_flip=horizontal_flip,
           fill_mode='nearest')
    
    for classe in classes:
        picts = os.listdir(train_path + '/' + classe)
        print(classe)
        
        for pict in picts:
            img = Image.open(train_path + '/' + classe + '/' + pict)
            img = np.array(img)
            img = img.reshape((1,) + img.shape)
            i=0
            
            for batch in datagen.flow(img, batch_size=1, save_to_dir=train_path, save_prefix=classe + '/' + classe, save_format='jpeg'):
                i += 1
                if i > nb_img:
                    break  # otherwise the generator would loop indefinitely
